<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/styles_prodducts.css">
    <link href="/css/styles_navBar.css" rel="stylesheet">
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/tailwindcss@2.0.1/dist/tailwind.min.css'>
    <link rel='stylesheet' href='https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,400;0,600;0,700;1,400&amp;display=swap'><link rel="stylesheet" href="./style.css">


    <title>Document</title>
</head>
<body>
    <nav class="navbar">
        <div class="website-name">Website Name</div>
        <ul class="nav-links">
            <li><a href="/" class="nav-link"><i class="fa fa-fw fa-home"></i> Home</a></li>
            <li><a href="/about" class="nav-link">About</a></li>
            <li><a href="/products" class="nav-link">Products</a></li>
            <li><a href="/contact" class="nav-link">Contact</a></li>
        </ul>
    </nav>

    
    <section class="bg-white dark:bg-gray-900">
        <div class="container px-6 py-8 mx-auto">
            <div class="lg:flex lg:-mx-2">
                <div class="space-y-3 lg:w-1/5 lg:px-2 lg:space-y-4">
                    <!-- Search Bar -->
                    <div style=" position: absolute; left: 60px;">
                        <div class="pt-2 relative mx-auto text-gray-600">
                            <input class="border-2 border-gray-300 bg-white h-10 px-5 pr-16 rounded-lg text-sm focus:outline-none"
                                  type="search" id="searchInput" placeholder="Search products..." onkeyup="searchTable()">
                            <button type="button" class="absolute right-0 top-0 mt-5 mr-4" onclick="searchTable()">
                                <svg class="text-gray-600 h-4 w-4 fill-current" xmlns="http://www.w3.org/2000/svg"
                                    xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px"
                                    viewBox="0 0 56.966 56.966"
                                    style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve"
                                    width="512px" height="512px">
                                    <path
                                        d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                

                <div class="mt-6 lg:mt-0 lg:px-2 lg:w-4/5 ">
                    <div class="flex items-center justify-between text-sm tracking-widest uppercase ">
                        <p class="text-gray-500 dark:text-gray-300"> <%= products.length  %> Items </p>
                        <div class="flex items-center">
                            <p class="text-gray-500 dark:text-gray-300">Sort</p>
                            <select id="sortSelect" onchange="sortTable()"
                                    class="font-medium text-gray-700 bg-transparent dark:text-gray-500 focus:outline-none">
                                <option value="0">Recommended</option>
                                <option value="1">Name</option>
                                <option value="2">Price</option>
                            </select>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 gap-8 mt-8 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
                        <% products.forEach((product, index) => { %>
                            <div class="flex flex-col items-center justify-center w-full max-w-lg mx-auto">
                                <img class="object-cover w-full rounded-md h-72 xl:h-80" width="100" src="<%= product.image %>" alt="product image">
                                <h4 class="mt-2 text-lg font-medium text-gray-700 dark:text-gray-200"><%= product.Name %></h4>
                                <p class="text-blue-500"><%= product.Price %> $</p>
                                <a href="/product/<%= product._id %>" class="flex items-center justify-center w-full px-2 py-2 mt-4 font-medium tracking-wide text-white capitalize transition-colors duration-200 transform bg-gray-800 rounded-md hover:bg-gray-700 focus:outline-none">
                                    Learn More
                                </a>
                            </div>
                        <% }) %>
                    </div>
                    
                </div>
            </div>
        </div>
    </section>

    <script>
        // Search functionality
        function searchTable() {
            const input = document.getElementById('searchInput').value.toLowerCase();
            const items = document.querySelectorAll('.flex-col');
            
            items.forEach(item => {
                const productName = item.querySelector('h4').innerText.toLowerCase();
                if (productName.includes(input)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Sort functionality
        function sortTable() {
            const select = document.getElementById('sortSelect');
            const sortBy = select.options[select.selectedIndex].value;
             location.reload(); // Reloads the page, ideally replace this with AJAX for smooth sorting
        }
    </script>
</body>
</html>
